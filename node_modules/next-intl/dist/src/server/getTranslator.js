/* eslint-disable import/default */
import { cache } from 'react';
import createBaseTranslator, { getMessagesOrError } from 'use-intl/dist/src/core/createBaseTranslator';
import getConfig from './getConfig';
let hasWarned = false;
async function getTranslatorImpl(locale, namespace) {
    if (typeof locale === 'object') {
        const opts = locale;
        namespace = opts.namespace;
        locale = opts.locale;
        if (!hasWarned) {
            console.warn(`
DEPRECATION WARNING: Calling \`getTranslator\` with an object argument is deprecated, please update your call site accordingly.

// Previously
getTranslator({locale: 'en', namespace: 'About'});

// Now
getTranslator('en', 'About');

See also https://next-intl-docs.vercel.app/docs/next-13/server-components#using-internationalization-outside-of-components
`);
            hasWarned = true;
        }
    }
    const config = await getConfig(locale);
    const messagesOrError = getMessagesOrError({
        messages: config.messages,
        namespace,
        onError: config.onError
    });
    // We allow to resolve rich text formatting here, but the types forbid it when
    // `getTranslations` is used directly. Supporting rich text is important when
    // the react-server implementation calls into this function.
    // @ts-ignore
    return createBaseTranslator({
        ...config,
        namespace,
        messagesOrError
    });
}
export default cache(getTranslatorImpl);
//# sourceMappingURL=getTranslator.js.map